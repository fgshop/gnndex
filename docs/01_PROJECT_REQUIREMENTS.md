# 01. Project Requirements (PRD)

## 1. 프로젝트 목표

글로벌 사용자 대상의 고가용성 디지털 자산 거래소를 구축한다.

- Spot 거래를 핵심으로 시작하고 파생상품은 확장 단계로 분리한다.
- 웹(사용자), 관리자, 모바일(Android/iOS), API 서버를 독립 배포 가능한 구조로 설계한다.
- 보안, 감사가능성, 장애복구를 초기 단계부터 아키텍처에 내장한다.

## 2. 제품 범위

### 2.1 In Scope (MVP + V1)

1. 사용자 인증
   - 이메일 가입/로그인
   - 2FA(TOTP), 세션 관리, 디바이스 관리
2. 자산
   - 멀티 자산 지갑(입출금 주소, 네트워크 선택)
   - 잔고/홀드/가용 잔고 관리
3. 거래
   - Spot 주문(Market/Limit/Stop-Limit)
   - 주문 취소/부분 체결/체결 내역
   - 실시간 호가창/체결 스트림
4. 시장정보
   - 티커, 캔들, 거래량, 24h 통계
5. 관리자
   - 사용자 상태/KYC 상태 관리
   - 입출금 승인 정책/모니터링
   - 리스크 룰 관리(출금 제한, 속도 제한, 블랙리스트)
6. 운영
   - 감사로그, 알림, 장애 대응 대시보드

### 2.2 Out of Scope (초기 제외)

1. 고급 파생상품(선물/옵션)
2. 카피트레이딩/소셜트레이딩
3. 마진/대출/스테이킹
4. OTC 데스크

## 3. 사용자 유형

1. Trader (개인 사용자)
2. Institutional User (법인/전문 투자자)
3. Operations Admin (운영 관리자)
4. Compliance Admin (준법/감사 담당)
5. Support Agent (고객지원)

## 4. 핵심 기능 요구사항

## 4.1 인증/보안

- JWT Access + Refresh 토큰 기반 인증
- 모든 민감 기능(출금, 보안설정 변경)은 Step-up 인증 요구
- 비정상 로그인 탐지(국가/기기/시간대 이상치)

## 4.2 거래 엔진 연계

- 주문 생성/취소 요청은 멱등성 키를 지원
- 주문 상태는 비동기 이벤트로 최종 확정
- 체결 후 잔고 스냅샷 재계산과 이벤트 발행

## 4.3 지갑/입출금

- 체인별 컨펌 수 정책
- 입금 감지 후 일정 컨펌 도달 시 가용 잔고 반영
- 출금 화이트리스트 주소 정책(옵션)

## 4.4 시장 데이터

- 캔들(1m/5m/15m/1h/4h/1d)
- 티커/북/체결 실시간 스트림
- API 레이트 리밋 + 캐시 계층

## 4.5 관리자 기능

- 사용자 리스크 점수 기반 제한 정책
- 거래/출금/로그인/권한 변경 감사로그
- 운영자 역할 기반 접근 제어(RBAC)
- 운영 대시보드 필터 상태 URL 공유(운영 이슈 재현/협업용)
- 공유 URL 진입 시 필터 복원 상태를 UI에서 즉시 안내
- 공유 URL은 만료형 단축 코드 방식(서버 발급/검증) 지원

## 5. 비기능 요구사항

1. 성능
   - 주문 API p95 200ms 이하(매칭 엔진 제외, 게이트웨이 기준)
   - 공개 시세 API p95 120ms 이하
2. 가용성
   - 월간 99.9% 이상
3. 확장성
   - 수평 확장 가능한 API/WS 계층
4. 보안
   - 비밀키 KMS/Vault 보관
   - 데이터 전송/저장 암호화
5. 관측성
   - 로그, 메트릭, 트레이싱 표준화
6. 품질
   - 핵심 도메인 테스트 커버리지 80% 이상 목표

## 6. 규제/컴플라이언스 고려사항

- 지역별 KYC/AML 요구사항 대응 가능한 정책 엔진 분리
- 데이터 보존 정책(로그/거래내역/감사내역) 구성 가능
- 제재 국가/주소/지갑 위험도 룰 반영 가능한 구조

## 7. 완료 기준 (Definition of Done)

1. 요구사항 정의 완료
   - 기능 목록, API 계약, 데이터 계약, UI 플로우 승인
2. 구현 완료
   - 코드 리뷰 + 자동화 테스트 + 보안 체크 통과
3. 운영 준비 완료
   - 런북/알람/장애 대응 문서 준비
4. 출시 승인
   - Product + Tech Lead + Security 승인
