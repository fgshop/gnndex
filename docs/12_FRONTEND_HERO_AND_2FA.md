# 12. 프론트엔드 히어로 배경 & 2FA QR 코드

## 1. 2FA QR 코드 (Google Authenticator)

### 개요
마이페이지 > 보안 탭에서 2단계 인증 설정 시 OTP URL을 QR 코드로 표시하여 Google Authenticator 앱에서 바로 스캔할 수 있도록 구현.

### 구현 상세
- **패키지**: `qrcode.react` (QRCodeSVG 컴포넌트)
- **위치**: `frontend/src/features/mypage/my-page-panel.tsx`
- **동작 흐름**:
  1. 사용자가 비밀번호 입력 후 "2FA 시크릿 생성" 클릭
  2. `POST /v1/auth/2fa/setup` → `{ secret, otpauthUrl }` 응답
  3. `otpauthUrl`을 `QRCodeSVG`에 전달하여 160×160 QR 코드 렌더링
  4. QR 코드 옆에 수동 입력 키(secret)도 함께 표시
  5. 사용자가 6자리 인증 코드 입력 후 `POST /v1/auth/2fa/enable`로 활성화

### 레이아웃
- 모바일: QR 코드 + 시크릿 키 세로 배치 (`flex-col`)
- 데스크톱: QR 코드(좌) + 시크릿 키/안내문(우) 가로 배치 (`sm:flex-row`)
- QR 코드는 항상 흰색 배경(`bg-white`)으로 다크/라이트 모드 모두 스캔 가능

### i18n 키 (10개 언어)
- `mypage.twoFactor.scanQrCode` — QR 코드 스캔 안내 문구
- `mypage.twoFactor.manualEntry` — 수동 입력 키 라벨

---

## 2. 히어로 Cosmic Background

### 개요
랜딩 페이지 히어로 영역의 캔버스 기반 우주 배경 애니메이션. TradingView Pricing 페이지에서 영감을 받아 제작.

### 파일
- `frontend/src/components/cosmic-background.tsx`
- `frontend/src/app/page.tsx` (CosmicBackground 사용)

### 구성 요소

| 요소 | 다크 모드 | 라이트 모드 |
|------|----------|------------|
| 별 (260개) | 반짝이는 흰색 점 | 진한 파란 점 (alpha 0.5) |
| 은하수 (400개) | 대각선 밴드 + 성운 그라디언트 | 표시 안 함 |
| 지구 | 채워진 대양 + 대륙 + 구름 + 대기 림 | 반투명 배경 + 실선 대륙 + 강한 외곽 링 |
| 격자선 | 매우 은은 (alpha 0.04~0.05) | 선명 (alpha 0.18~0.2, 두께 0.6) |
| 대륙 | 채우기 + 실선 테두리 | 채우기(alpha 0.18) + 굵은 실선(alpha 0.5, 두께 1.2) |
| 도시 불빛 (28개) | 글로우 헤일로 + 밝은 코어 | 채워진 점 + 링 |
| 네트워크 선 (22개) | 반투명 선 + 3개 이동 펄스 | 실선 + 2개 이동 점 |
| 위성/스타링크 (16개) | 글로우 + 밝은 코어 + 궤도선 | 채워진 점 + 링 + 궤도선 |
| 유성 (~3.2초 간격) | 글로우 트레일 + 밝은 코어 | 굵은 실선 트레일 + 링 |

### 지구 설정
- **초기 회전**: 서울(127°E)이 정면 (`INITIAL_ROTATION = -127° → radians`)
- **축 기울기**: 23.5° 우측 기울기 (`AXIAL_TILT = 0.41`)
- **자전 속도**: `EARTH_ROTATION_SPEED = 0.0004` (프레임당)
- **대륙 데이터**: 실제 지리 좌표 기반 12개 대륙/섬 (아프리카, 유럽, 아시아, 북미, 남미, 호주, 그린란드, 일본, 영국, 인도네시아, 마다가스카르, 뉴질랜드)
- **도시 불빛**: 8개 대륙 그룹별 고유 색상, 반짝임 패턴

### 위성/스타링크 궤도

| 궤도 유형 | 개수 | 반지름 배율 | 경사각 | 속도 |
|----------|------|-----------|--------|------|
| LEO Starlink (그룹 A) | 5 | 1.12 | 92° | 0.0032 |
| LEO Starlink (그룹 B) | 4 | 1.14 | -75° | 0.0028 |
| MEO | 3 | 1.22 | 45° | 0.002 |
| 극궤도 | 2 | 1.18 | ~85° | 0.0025 |
| GEO (정지궤도) | 2 | 1.35 | ~7° | 0.0008 |

- 3D 궤도 계산: 궤도면 경사 → 축 기울기 적용 → 2D 투영
- 지구 뒤쪽 위성은 자동 숨김 (`z < 0`)
- 태양 반사 플레어로 주기적 밝기 변화
- 궤도 경로는 전면(visible) 구간만 렌더링

### 3D 투영 함수
```
project(lat, lng, rot, tilt, cx, cy, R)
```
1. 구면좌표 → 직교좌표 (x, y, z)
2. Y축 회전 (지구 자전)
3. Z축 회전 (축 기울기)
4. 2D 투영 + 가시성 판정 (z > 0)

### 반응형 캔버스
- `ResizeObserver`로 캔버스 엘리먼트 크기 변경 감지
- 언어 변경 등으로 컨테이너 높이가 변해도 캔버스 내부 해상도를 즉시 재계산
- 지구가 타원으로 찌그러지는 문제 방지

### 테마 전환
- `MutationObserver`로 `<html>` 클래스 변경 감지 (`dark` 클래스 유무)
- 다크 ↔ 라이트 전환 시 즉시 렌더링 팔레트 변경 (페이지 새로고침 불필요)
